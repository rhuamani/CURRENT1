<html>
<title>Welcome!</title>


<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  <link rel="stylesheet" type="text/css" href="style.css" media="screen,projection">
<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
</head>

<body>

<div id= "welcometext">
<h1 style="color: orange" id="welcome"> Welcome</h2>
<h2 id="weather"> Today it's </h2>
</div>

<div id="images">
</div>

<h3> Here's what you could wear </h3>

<div class="carousel">
  <a class="carousel-item"  id="one"></a>
  <a class="carousel-item" id="two"></a>
  <a class="carousel-item" id="three"></a>
</div>
</body>

<script>
console.log("start");

    //zip code gotten from sign_in.html
    var zipIndex = window.location.search.indexOf('zipCode');
    var zipcode= window.location.search.substring(zipIndex+8);
    var name= window.location.search.substring(window.location.search.indexOf('fm=')+3, zipIndex-1);
    document.title = "Welcome, "+name+"!";
    document.getElementById("welcome").innerHTML = "Welcome, "+name+"!";
    var jsonURL = "http://api.openweathermap.org/data/2.5/weather?zip="+ zipcode+ "&units=imperial&mode=json&APPID=cf12551bc957867b30cc2c8cc464ce02";

  $.getJSON(jsonURL, function( data ) {
    $("#welcometext").hide().slideDown();
    console.log("entering json");
    console.log(data);

    var temperature = document.getElementById("weather");
    var temp = data.main.temp;
    console.log(temp);

    var desc = String(data.weather[0].description);
    var rand = Math.floor(Math.random() * 3) + 1  ;


    console.log(desc);
    colors = ['#4200ff', '#0648ff', '#0084ff', '#009dff', '#00b6ff',
    '#00d6ff', '#00FF81', '#FFF254', '#FFAD00', '#FF7800',
    '#ff6300', '#ff2d00', '#FF0300'];

    temperature.innerHTML = "Today it's " + temp + " in "+ data.name ;

    //background color
    if (temp < 0) {
			$('body').css('background', colors[0]);
		} else if (temp < 10) {
			$('body').css('background', colors[1]);
		} else if (temp < 20) {
			$('body').css('background', colors[2]);
		} else if (temp < 30) {
			$('body').css('background', colors[3]);
		} else if (temp < 40) {
			$('body').css('background', colors[4]);
		} else if (temp < 50) {
			$('body').css('background', colors[5]);
		} else if (temp < 60) {
			$('body').css('background', colors[6]);
		} else if (temp < 70) {
      console.log("entered");
			$('body').css('background', colors[7]);
		} else if (temp < 80) {
			$('body').css('background', colors[8]);
		} else if (temp < 90) {
			$('body').css('background', colors[9]);
		} else if (temp < 100) {
			$('body').css('background', colors[10]);
		} else if (temp < 110) {
			$('body').css('background', colors[11]);
		} else if (temp >= 110) {
			$('body').css('background', colors[12]);
		}
    //clouds
    if (desc === "Sunny"){
      $( "<img>" ).attr( "src","images/sunny.png").attr("width","100").appendTo( "#images" );
    }else if (desc === "Partly Cloudy "){
      $( "<img>" ).attr( "src","images/partlycloudy.png").attr("width","100").appendTo( "#images" );
    }else if (desc === "Cloudy "){
      $( "<img>" ).attr( "src","images/cloudy.png").attr("width","100").appendTo( "#images" );
    }

    if (rand == 1){
      if (temp<50){
        $( "<img>" ).attr( "src","shirts/hoodie.jpeg").appendTo( "#one" );
        $( "<img>" ).attr( "src","pants/darkjean.jpeg").appendTo( "#two" );
        $( "<img>" ).attr( "src","shoes/black.jpeg").appendTo( "#three" );

      }else if (temp<70){

      }else if (temp<100){

      }
      $( "<img>" ).attr( "src","shirts/marooncollar.jpeg").appendTo( "#one" );
      $( "<img>" ).attr( "src","pants/darkjean.jpeg").appendTo( "#two" );
      $( "<img>" ).attr( "src","shoes/black.jpeg").appendTo( "#three" );

    }else if (rand==2){
      if (temp<50){
        $( "<img>" ).attr( "src","shirts/sweater.jpeg").appendTo( "#two" );
        $( "<img>" ).attr( "src","pants/momjean.jpeg").appendTo( "#two" );
        $( "<img>" ).attr( "src","shoes/white.jpeg").appendTo( "#three" );
      }


      $( "<img>" ).attr( "src","shirts/stripe.jpeg").appendTo( "#one" );
      $( "<img>" ).attr( "src","pants/momjean.jpeg").appendTo( "#two" );
      $( "<img>" ).attr( "src","shoes/white.jpeg").appendTo( "#three" );
    }else if (rand==3){
      if (temp<50){
        $( "<img>" ).attr( "src","shirts/pinksweater.jpeg").appendTo( "#two" );
        $( "<img>" ).attr( "src","pants/momjean.jpeg").appendTo( "#two" );
        $( "<img>" ).attr( "src","shoes/white.jpeg").appendTo( "#three" );
      }

      $( "<img>" ).attr( "src","shirts/whiteshirt.jpeg").appendTo( "#one" );
      $( "<img>" ).attr( "src","pants/jeans.jpeg").appendTo( "#two" );
      $( "<img>" ).attr( "src","shoes/brown.jpeg").appendTo( "#three" );
    }
    $(document).ready(function(){
      $('.carousel').carousel();
    });

  });

  console.log("lmao");
</script>


<html>
